sap.ui.define(["sap/ui/core/message/Message","sap/ui/core/MessageType"],function(e,s){"use strict";var t=function(){this._isValid=true;this._isValidationPerformed=false;this._aMessages=[];this._oMessageProcessor=new sap.ui.core.message.ControlMessageProcessor;this._oMessageManager=sap.ui.getCore().getMessageManager()};t.prototype.isValid=function(){return this._isValidationPerformed&&this._isValid};t.prototype.validate=function(e){this._isValid=true;this._validate(e);return this.isValid()};t.prototype._validate=function(t){this._removeMessagesOf(t);var a=["items","content","form","formContainers","formElements","fields","cells"],i=null,r=null,o=["value","selectedKey","text","dateValue"],g=false,n,l,f,u;if(t instanceof sap.ui.core.Control||t instanceof sap.ui.layout.form.FormContainer||t instanceof sap.ui.layout.form.FormElement){if(t.getVisible()){for(f=0;f<o.length;f+=1){var d=o[f];if(t.getBinding(d)){if(t.getBinding(d).getType()){try{r=t.getBinding(d);n=t.getProperty(d);l=r.getType().parseValue(n,r.sInternalType);t.getBinding(d).getType().validateValue(l)}catch(a){this._isValid=false;var p=typeof t.getValueStateText==="function"?t.getValueStateText():undefined,M=new e({message:typeof p==="string"&&p.trim().length>0?p:a.message,type:s.Error,target:"/"+t.getId()+"/"+d,processor:this._oMessageProcessor});this._aMessages[t.getId()]=M;this._oMessageManager.addMessages(M)}g=true}else if(t instanceof sap.m.InputBase&&t.getRequired()){n=t.getProperty(d);if(!n||typeof n==="string"&&n.trim().length===0){this._isValid=false;r=t.getBinding(d);p=typeof t.getValueStateText==="function"?t.getValueStateText():null;M=new e({message:p,type:s.Error,target:"/"+t.getId()+"/"+d,processor:this._oMessageProcessor});this._aMessages[t.getId()]=M;this._oMessageManager.addMessages(M)}g=true}}}if(!g){for(f=0;f<a.length;f+=1){i=t.getAggregation(a[f]);if(i){if(i instanceof Array){for(u=0;u<i.length;u+=1){this._validate(i[u])}}else{this._validate(i)}}}}}}this._isValidationPerformed=true};t.prototype._removeMessagesOf=function(e){if(this._aMessages[e.getId()]){sap.ui.getCore().getMessageManager().removeMessages([this._aMessages[e.getId()]]);if(typeof e.setValueState==="function"){e.setValueState(sap.ui.core.ValueState.None)}delete this._aMessages[e.getId()]}};t.prototype.removeAllMessages=function(){sap.ui.getCore().getMessageManager().removeAllMessages();for(var e in this._aMessages){if(e&&this._aMessages[e]){sap.ui.getCore().getMessageManager().removeMessages(this._aMessages[e]);var s=sap.ui.getCore().byId(e);if(s&&typeof s.setValueState==="function"){s.setValueState(sap.ui.core.ValueState.None)}}}this._aMessages=[]};return t});