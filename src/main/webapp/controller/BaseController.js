sap.ui.define(["sap/ui/core/mvc/Controller","com/mjzsoft/Mjzsoft0Launchpad/js/Validator"],function(e,t){"use strict";return e.extend("com.mjzsoft.Mjzsoft0Launchpad.controller.BaseController",{getById:function(e){return sap.ui.getCore().byId(e)},getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},getModel:function(e){var t=this.getOwnerComponent().getModel(e);return t?t:this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},onBeforeRendering:function(e){sap.ui.getCore().getEventBus().publish("App","StartAppBusy",null)},onAfterRendering:function(e){sap.ui.getCore().getEventBus().publish("App","StopAppBusy",null)},getFieldsByGroupId:function(e,t){var r=t?t.getControlsByFieldGroupId(e):this.getView().getControlsByFieldGroupId(e);return r},bindOnChangeToInputs:function(e,t){var r=this.getFieldsByGroupId(e,t);if(r){for(var a=0;a<r.length;a++){if(typeof r[a].attachChange==="function"){r[a].attachChange(this.onInputChange,this)}}}return this},onInputChange:function(e){if(e){var t=e.getSource(),r=t.getBindingContext();if(r!==undefined&&r!==null){var a={"sap.m.Input":"value","sap.m.Select":"selectedKey","sap.m.CheckBox":"selected","sap.m.DatePicker":"dateValue","sap.m.DateTimePicker":"value","sap.m.TextArea":"value","sap.m.Switch":"state"},n=function(e){var t=e.substring(1),r=e.charAt(0).toUpperCase(),a="get"+r+t;return a},i=t.getMetadata().getName(),o=r.getModel(),s=t.getBinding(a[i]).getPath(),l=s&&s.startsWith("/")?s.substring(1):s,u=r.getPath()+"/"+l,g=n(a[i]),d=t[g]();if(t.getBindingContext()){if(i==="sap.m.DatePicker"){if(d){o.setProperty(u,new Date(d))}else{o.setProperty(u,null)}}else if(i==="sap.m.DateTimePicker"){if(d){o.setProperty(u,new Date(t.getDateValue()))}else{o.setProperty(u,null)}}else{o.setProperty(u,d)}}}this.getValidator().validate(t)}},areFieldsValid:function(e,t){var r=this.getFieldsByGroupId(e,t),a=this.getValidator(),n=true;if(r){for(var i=0;i<r.length&&n;i++){var o=r[i];n=a.validate(o)}}return n},isFieldValid:function(e){var t=this.getValidator();return t.validate(e)},getFieldValueByType:function(e){var t={"sap.m.Input":"value","sap.m.Select":"selectedKey","sap.m.CheckBox":"selected","sap.m.DatePicker":"dateValue","sap.m.DateTimePicker":"value","sap.m.TextArea":"value","sap.m.Switch":"state"},r=function(e){var t=e.substring(1),r=e.charAt(0).toUpperCase(),a="get"+r+t;return a},a=e.getMetadata().getName(),n=r(t[a]),i=e[n]();return i},initiateValidator:function(){this._oValidator=new t;this._oValidator.removeAllMessages();return this._oValidator},resetAllValueStates:function(){if(!this._oValidator){this._oValidator=new t}this._oValidator.removeAllMessages()},getValidator:function(){if(!this._oValidator){this._oValidator=new t}return this._oValidator},extractErrorMessage:function(e,t,r){var a=e?e.responseJSON:undefined,n=this.getResourceBundle().getText("login_errorHeader")+": ";if(!a){n+=this.getResourceBundle().getText("login_errorConnection")}else if(a.error&&a.error.length>0){n+=a.error+"\n"}else if(a.message&&a.message.length>0){n+=a.message+"\n"}else if(a.data&&a.data.length>0){n+=a.data+"\n"}return n}})});